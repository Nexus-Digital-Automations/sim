import { memo } from 'react'
import { useAtom } from 'jotai'
import Avatar from '@/components/avatar/avatar'
import HeaderWrapper from '@/components/header-wrapper/header-wrapper'
import CopyText from '@/components/ui/custom/copy-text'
import { agentAtom, customerAtom, sessionAtom } from '@/store'
import type { AgentInterface } from '@/utils/interfaces'

const SessoinViewHeader = () => {
  const [session] = useAtom(sessionAtom)
  const [agent] = useAtom(agentAtom)
  const [customer] = useAtom(customerAtom)

  return (
    <HeaderWrapper>
      {session?.id && (
        <div className='m-auto flex h-full w-full max-w-[1000px] items-center pb-[2px]'>
          <div className='flex h-full flex-1 items-center overflow-hidden whitespace-nowrap border-[#F3F5F9] border-e'>
            {agent && <Avatar agent={agent as AgentInterface} tooltip={false} />}
            <div>
              <div>{agent?.name}</div>
              <div className='group flex items-center gap-[3px] font-normal text-[14px]'>
                <CopyText preText='Agent ID:' text={` ${agent?.id}`} textToCopy={agent?.id} />
              </div>
            </div>
          </div>
          <div className='flex h-full flex-1 items-center overflow-hidden whitespace-nowrap ps-[14px]'>
            {customer && <Avatar agent={customer as AgentInterface} tooltip={false} />}
            <div>
              <div>{(customer?.id === 'guest' && 'Guest') || customer?.name}</div>
              <div className='group flex items-center gap-[3px] font-normal text-[14px]'>
                <CopyText
                  preText='Customer ID:'
                  text={` ${customer?.id}`}
                  textToCopy={customer?.id}
                />
              </div>
            </div>
          </div>
        </div>
      )}
    </HeaderWrapper>
  )
}
export default memo(SessoinViewHeader)
