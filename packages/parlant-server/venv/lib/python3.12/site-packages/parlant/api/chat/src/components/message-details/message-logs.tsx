import type { Log } from '@/utils/interfaces'
import MessageLog from './message-log'

interface Props {
  messagesRef: React.RefObject<HTMLDivElement>
  filteredLogs: Log[]
}

const MessageLogs = ({ messagesRef, filteredLogs }: Props) => {
  return (
    <div className='h-[calc(100%-12px)] overflow-hidden rounded-[6px] p-[6px]'>
      <div className='h-full flex-1 rounded-[3px] border bg-white pt-0'>
        <div className='flex min-h-[48px] items-center border-[#EDEFF3] border-b font-medium text-[14px]'>
          <div className='flex min-h-[48px] w-[86px] items-center border-[#EDEFF3] border-e ps-[10px]'>
            Level
          </div>
          <div className='flex-1 ps-[10px]'>Message</div>
        </div>
        <div
          ref={messagesRef}
          className='fixed-scroll h-[calc(100%-60px)] overflow-auto rounded-[8px] bg-white font-normal text-[14px]'
        >
          {filteredLogs.map((log, i) => (
            <div
              key={i}
              className='group flex min-h-[48px] items-stretch border-[#EDEFF3] border-t font-ibm-plex-mono hover:bg-[#FAFAFA] [&:first-child]:border-[0px] [&:last-child]:border-b'
            >
              <div className='flex min-h-[48px] w-[86px] min-w-[86px] border-[#EDEFF3] border-e ps-[10px] pt-[10px] capitalize'>
                {log.level?.toLowerCase()}
              </div>
              <MessageLog log={log} />
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}
export default MessageLogs
