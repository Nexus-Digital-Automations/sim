# Parlant Server Environment Configuration
# This file provides a template for configuring the Parlant server
# Copy this file to .env and update the values as needed

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection URL - uses the same database as Sim
# Priority: POSTGRES_URL (Vercel) > DATABASE_URL (local/docker)
DATABASE_URL="postgresql://username:password@localhost:5432/sim_database"
POSTGRES_URL=""  # Set by Vercel automatically, leave empty for local development

# Database connection pool settings
DB_POOL_SIZE=10              # Number of connections to maintain in pool
DB_MAX_OVERFLOW=15           # Maximum additional connections beyond pool_size
DB_POOL_TIMEOUT=30           # Connection timeout in seconds
DB_CONNECTION_TIMEOUT=10     # Initial connection establishment timeout

# =============================================================================
# SIM INTEGRATION
# =============================================================================
# These should match your Sim application configuration
NEXT_PUBLIC_APP_URL="http://localhost:3000"    # Your Sim application URL
BETTER_AUTH_SECRET=""                          # Same secret used by Sim (required)
BETTER_AUTH_URL=""                             # Optional: dedicated auth service URL

# JWT Configuration for session tokens
JWT_ALGORITHM="HS256"
JWT_EXPIRE_HOURS=24

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
HOST="0.0.0.0"
PORT=8001
DEBUG=false

# CORS origins - include your Sim app URL
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:3001,https://localhost:3000"

# =============================================================================
# REDIS (Optional - for enhanced session storage)
# =============================================================================
REDIS_URL="redis://localhost:6379/0"
REDIS_KEY_PREFIX="parlant:"

# =============================================================================
# PARLANT-SPECIFIC CONFIGURATION
# =============================================================================
# Logging level for Parlant operations
PARLANT_LOG_LEVEL="INFO"

# Resource limits
PARLANT_MAX_AGENTS=100
MAX_AGENTS_PER_WORKSPACE=10
PARLANT_SESSION_TIMEOUT=3600  # Session timeout in seconds (1 hour)

# Workspace isolation (recommended: true)
ENABLE_WORKSPACE_ISOLATION=true

# =============================================================================
# PRODUCTION CONSIDERATIONS
# =============================================================================
# In production, ensure:
# 1. DATABASE_URL/POSTGRES_URL points to your production PostgreSQL instance
# 2. BETTER_AUTH_SECRET matches your Sim application exactly
# 3. ALLOWED_ORIGINS includes your production Sim URL
# 4. DEBUG is set to false
# 5. Use proper SSL/TLS for database connections
# 6. Consider using environment-specific connection pooling settings

# Example production DATABASE_URL format:
# DATABASE_URL="postgresql://user:password@host:port/database?sslmode=require"

# Security Notes:
# - Keep BETTER_AUTH_SECRET secure and synchronized with Sim
# - Use strong database credentials
# - Enable SSL for database connections in production
# - Restrict CORS origins to only necessary domains